# onap-smo-lite

This Helm chart deploys a minimal ONAP SMO stack for demo purposes. The stack consists of the SDNC web UI, SDNR controller, SDNR Elasticsearch database, the supporting Kafka/Zookeeper pair, the ONAP VES collector used for alarm and registration forwarding, and an optional Kafka UI for easy inspection of topics.

> **Demo-only:** the chart intentionally deploys a specific constellation of ONAP components to showcase integration with the srsRAN CU/DU. It is not meant as a turnkey, production-ready ONAP installation. For more info refer to the official ONAP deployment guides.

## Components

- **sdnc-web** – Presents the SDNR web UI and forwards traffic to the controller.
- **sdnr** – SDN controller instance with SDNR features enabled.
- **sdnrdb** – Single-node Elasticsearch backend consumed by SDNR.
- **kafka** – Single broker used as the messaging backbone for SDNR notifications.
- **zookeeper** – Zookeeper instance backing the Kafka broker.
- **ves-collector** – ONAP DCAE VES collector connected to Kafka for VES events.
- **kafka-ui** – Lightweight web UI to inspect Kafka topics and consumer groups.

## Quick Start

```bash
helm install onap-smo ./
```

By default the chart provisions Kubernetes `Deployment` objects for all three workloads with in-cluster `Service` discovery and shareable configuration served through `ConfigMap` and `Secret` resources. Supply your own credentials by pointing `sdnr.adminCredentials.existingSecret` to a pre-created secret containing `username` and `password` keys.

## Configuration Highlights

| Value | Description | Default |
|-------|-------------|---------|
| `sdncWeb.image.repository` | Container image repository for the web UI | `nexus3.onap.org:10001/onap/sdnc-web-image` |
| `sdncWeb.image.tag` | Container image tag for the web UI | `3.1.1-STAGING-latest` |
| `sdncWeb.ingress.enabled` | Expose UI via ingress | `false` |
| `sdncWeb.service.type` | Kubernetes service type for sdnc-web | `NodePort` |
| `sdncWeb.service.nodePort` | NodePort used when service type is `NodePort` | `30080` |
| `sdnr.image.repository` | Container image repository for the SDNR controller | `nexus3.onap.org:10001/onap/sdnc-image` |
| `sdnr.image.tag` | Container image tag for the SDNR controller | `3.1.1-STAGING-latest` |
| `sdnr.adminCredentials` | Inline username/password (autogenerated secret if no existing secret) | `root/root` |
| `sdnr.config.*` | Device manager and registrar property files | Preconfigured for in-cluster VES/SDNR/Kafka endpoints |
| `sdnrdb.image.repository` | Elasticsearch image repository | `docker.elastic.co/elasticsearch/elasticsearch-oss` |
| `sdnrdb.image.tag` | Elasticsearch image tag | `7.9.3` |
| `sdnrdb.persistence.enabled` | Persist ES data using PVC | `false` |
| `kafka.image.repository` | Container image repository for Kafka broker | `quay.io/strimzi/kafka` |
| `kafka.service.port` | Kafka listener port | `9092` |
| `kafka.auth.enabled` | Enable SASL/JAAS auth configuration | `false` |
| `zookeeper.image.repository` | Container image repository for Zookeeper | `quay.io/strimzi/kafka` |
| `zookeeper.service.port` | Zookeeper client port | `2181` |
| `vesCollector.image.repository` | Container image repository for the VES collector | `nexus3.onap.org:10001/onap/org.onap.dcaegen2.collectors.ves.vescollector` |
| `vesCollector.env.bootstrapServers` | Kafka bootstrap servers used by the collector | `onap-smo-kafka.onap.svc.srsk8s.bcn:9092` |
| `vesCollector.credentials.username/password` | VES collector basic-auth credentials | `sample1/sample1` |
| `kafkaUi.enabled` | Toggle deployment of the Kafka UI | `true` |
| `kafkaUi.service.type` | Service type for Kafka UI | `NodePort` |
| `kafkaUi.ingress.enabled` | Expose Kafka UI through an ingress | `false` |

> **Note:** The chart defaults assume the Kubernetes DNS zone suffix `srsk8s.bcn`. Change the service hostnames accordingly if your cluster uses a different cluter domain.

Refer to [`values.yaml`](values.yaml) for the complete list of tunables.
